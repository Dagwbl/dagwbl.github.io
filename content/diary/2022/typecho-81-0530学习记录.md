---
title: 0530学习记录
date: '2022-05-30T21:03:56Z'
slug: '81'
tags: []
categories:
  - typecho
  - diary
---
今日气温23.6摄氏度。下午气温23.6，晚上气温22.8摄氏度。

通过传统的php提供的mysqli工具进行数据库的连接，提供的是短连接，频繁的建立连接和断开连接容易导致socket错误，进而无法进行正常的数据插入操作，在进行密集的数据插入过程中，一次socket 错误往往导致大量关键数据的损失。这也是之前出现这个问题的根本原因，当时基本没有排查出来。

通过查阅相关问题后，决定采用PDO提供的长连接方法，同时注释掉旧的mysqli的相关代码，问题得到解决，没有再出现socket错误。
